# iOS Google OAuth 2.0 ì„¤ì • ê°€ì´ë“œ

## ë¬¸ì œ ìƒí™©
- iOSì—ì„œ Google ë¡œê·¸ì¸ ì‹œ "400 ì˜¤ë¥˜: invalid_request" ë°œìƒ
- ì›ì¸: OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ IDê°€ Google Cloud Consoleì— ì œëŒ€ë¡œ ë“±ë¡ë˜ì§€ ì•ŠìŒ

## ğŸ“‹ í•„ìš”í•œ ì •ë³´

### í˜„ì¬ í”„ë¡œì íŠ¸ ì •ë³´
- **Firebase Project ID**: `insign-69997`
- **Firebase Project Number**: `723715287873`
- **Bundle ID**: `app.insign`
- **iOS Client ID**: `723715287873-nrqen0g7j7m679h6196i215308441539.apps.googleusercontent.com`
- **Web Client ID**: `723715287873-8jp38k93ksspp7jkeljv4v0jr2eobcb7.apps.googleusercontent.com`

## ğŸ”§ ì„¤ì • ë‹¨ê³„

### 1ë‹¨ê³„: Google Cloud Consoleì—ì„œ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID í™•ì¸

1. **Google Cloud Console ì ‘ì†**
   - ì£¼ì†Œ: https://console.cloud.google.com/
   - Firebase í”„ë¡œì íŠ¸ì™€ ì—°ê²°ëœ Google Cloud í”„ë¡œì íŠ¸ ì„ íƒ

2. **API ë° ì„œë¹„ìŠ¤ > ì‚¬ìš©ì ì¸ì¦ ì •ë³´**
   - ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "API ë° ì„œë¹„ìŠ¤" â†’ "ì‚¬ìš©ì ì¸ì¦ ì •ë³´" ì„ íƒ

3. **OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID í™•ì¸**
   - ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ID ëª©ë¡ í™•ì¸:
     - iOS í´ë¼ì´ì–¸íŠ¸ ID (iOSìš©)
     - ì›¹ í´ë¼ì´ì–¸íŠ¸ ID (Android/ì„œë²„ìš©)
     - Android í´ë¼ì´ì–¸íŠ¸ ID (Androidìš©)

### 2ë‹¨ê³„: iOS OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±/ìˆ˜ì •

#### iOS í´ë¼ì´ì–¸íŠ¸ IDê°€ ì—†ëŠ” ê²½ìš°:

1. **"+ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" í´ë¦­**
   - "OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID" ì„ íƒ

2. **ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜• ì„ íƒ**
   - ìœ í˜•: **iOS**

3. **iOS ì•± ì •ë³´ ì…ë ¥**
   ```
   ì´ë¦„: insign iOS Client
   Bundle ID: app.insign
   ```

4. **"ë§Œë“¤ê¸°" í´ë¦­**
   - ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ ID ë³µì‚¬

#### iOS í´ë¼ì´ì–¸íŠ¸ IDê°€ ìˆëŠ” ê²½ìš°:

1. **ê¸°ì¡´ iOS í´ë¼ì´ì–¸íŠ¸ ID í´ë¦­**
2. **Bundle ID í™•ì¸**
   - Bundle IDê°€ `app.insign`ì¸ì§€ í™•ì¸
   - ë‹¤ë¥´ë©´ ìˆ˜ì •

### 3ë‹¨ê³„: OAuth ë™ì˜ í™”ë©´ ì„¤ì •

1. **"OAuth ë™ì˜ í™”ë©´" ë©”ë‰´ ì„ íƒ**

2. **ì•± ì •ë³´ ì…ë ¥**
   ```
   ì•± ì´ë¦„: ì¸ì‹¸ì¸
   ì‚¬ìš©ì ì§€ì› ì´ë©”ì¼: (ë³¸ì¸ ì´ë©”ì¼)
   ì•± ë¡œê³ : (ì„ íƒì‚¬í•­)
   ì•± ë„ë©”ì¸:
     - ì• í”Œë¦¬ì¼€ì´ì…˜ í™ˆí˜ì´ì§€: https://in-sign.shop
     - ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨: https://in-sign.shop/privacy-policy
     - ì„œë¹„ìŠ¤ ì•½ê´€: https://in-sign.shop/terms-of-service
   ê°œë°œì ì—°ë½ì²˜ ì •ë³´: (ë³¸ì¸ ì´ë©”ì¼)
   ```

3. **ë²”ìœ„ ì„¤ì •**
   - "ë²”ìœ„ ì¶”ê°€ ë˜ëŠ” ì‚­ì œ" í´ë¦­
   - ë‹¤ìŒ ë²”ìœ„ ì¶”ê°€:
     - `email`
     - `profile`
     - `openid`

4. **ê²Œì‹œ ìƒíƒœ**
   - **í…ŒìŠ¤íŠ¸ ì¤‘**: í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìë§Œ ë¡œê·¸ì¸ ê°€ëŠ¥
   - **í”„ë¡œë•ì…˜**: ëª¨ë“  ì‚¬ìš©ì ë¡œê·¸ì¸ ê°€ëŠ¥

   **ì¤‘ìš”**: ì•±ì„ ë°°í¬í•˜ê¸° ì „ì— "í”„ë¡œë•ì…˜"ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤!

5. **í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì¶”ê°€** (í…ŒìŠ¤íŠ¸ ì¤‘ì¸ ê²½ìš°)
   - ë³¸ì¸ Gmail ì£¼ì†Œ ì¶”ê°€
   - `propose101@gmail.com` ì¶”ê°€

### 4ë‹¨ê³„: Firebase Consoleì—ì„œ iOS ì•± ì„¤ì •

1. **Firebase Console ì ‘ì†**
   - ì£¼ì†Œ: https://console.firebase.google.com/
   - í”„ë¡œì íŠ¸ ì„ íƒ: `insign-69997`

2. **í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜**
   - "ë‚´ ì•±" ì„¹ì…˜ì—ì„œ iOS ì•± í™•ì¸
   - Bundle IDê°€ `app.insign`ì¸ì§€ í™•ì¸

3. **Authentication ì„¤ì •**
   - ì¢Œì¸¡ ë©”ë‰´ "Authentication" ì„ íƒ
   - "Sign-in method" íƒ­ ì„ íƒ
   - Google ì œê³µì—…ì²´ í™œì„±í™” í™•ì¸

4. **GoogleService-Info.plist ë‹¤ìš´ë¡œë“œ**
   - í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜ > iOS ì•±
   - "GoogleService-Info.plist ë‹¤ìš´ë¡œë“œ" í´ë¦­
   - ë‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ `ios/Runner/` ë””ë ‰í† ë¦¬ì— ë³µì‚¬ (ë®ì–´ì“°ê¸°)

### 5ë‹¨ê³„: ì•± ì½”ë“œ í™•ì¸

#### Info.plist ì„¤ì • í™•ì¸ (ì´ë¯¸ ì™„ë£Œë¨)

`ios/Runner/Info.plist`:
```xml
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>com.googleusercontent.apps.723715287873-nrqen0g7j7m679h6196i215308441539</string>
        </array>
    </dict>
</array>
<key>GIDClientID</key>
<string>723715287873-nrqen0g7j7m679h6196i215308441539.apps.googleusercontent.com</string>
```

#### GoogleAuthService ì„¤ì • í™•ì¸ (ì´ë¯¸ ìˆ˜ì •ë¨)

`lib/data/services/google_auth_service.dart`:
```dart
static const String _iosClientId =
    '723715287873-nrqen0g7j7m679h6196i215308441539.apps.googleusercontent.com';

static final GoogleSignIn _googleSignIn = GoogleSignIn(
  clientId: kIsWeb
      ? _webClientId
      : (defaultTargetPlatform == TargetPlatform.iOS ? _iosClientId : null),
  serverClientId: _webClientId,
);
```

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:

- [ ] Google Cloud Consoleì—ì„œ iOS OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±/í™•ì¸
- [ ] Bundle IDê°€ `app.insign`ìœ¼ë¡œ ì •í™•íˆ ì„¤ì •ë¨
- [ ] OAuth ë™ì˜ í™”ë©´ ì„¤ì • ì™„ë£Œ
- [ ] OAuth ë™ì˜ í™”ë©´ ê²Œì‹œ ìƒíƒœ í™•ì¸ (í…ŒìŠ¤íŠ¸/í”„ë¡œë•ì…˜)
- [ ] í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì¶”ê°€ (í…ŒìŠ¤íŠ¸ ëª¨ë“œì¸ ê²½ìš°)
- [ ] Firebase Consoleì—ì„œ Google ì¸ì¦ í™œì„±í™”
- [ ] GoogleService-Info.plist ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- [ ] Info.plistì— URL Scheme ì„¤ì • ì™„ë£Œ
- [ ] GoogleAuthServiceì— iOS Client ID ì¶”ê°€ ì™„ë£Œ

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

1. **ì•± ì¬ë¹Œë“œ**
   ```bash
   flutter clean
   flutter pub get
   cd ios && pod install && cd ..
   flutter build ios --no-codesign
   ```

2. **Xcodeë¡œ ì‹¤í–‰**
   - Xcodeì—ì„œ `ios/Runner.xcworkspace` ì—´ê¸°
   - ì‹¤ì œ iOS ë””ë°”ì´ìŠ¤ë‚˜ ì‹œë®¬ë ˆì´í„° ì„ íƒ
   - Run ë²„íŠ¼ í´ë¦­

3. **Google ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸**
   - ë¡œê·¸ì¸ í™”ë©´ì—ì„œ "Googleë¡œ ë¡œê·¸ì¸" í´ë¦­
   - Google ê³„ì • ì„ íƒ
   - ê¶Œí•œ ìŠ¹ì¸
   - ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. OAuth ë™ì˜ í™”ë©´ ìƒíƒœ
- **í…ŒìŠ¤íŠ¸ ëª¨ë“œ**:
  - ë“±ë¡ëœ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìë§Œ ë¡œê·¸ì¸ ê°€ëŠ¥
  - ìµœëŒ€ 100ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥
  - ì•± ìŠ¤í† ì–´ ë°°í¬ ì „ì— í”„ë¡œë•ì…˜ìœ¼ë¡œ ë³€ê²½ í•„ìš”

- **í”„ë¡œë•ì…˜ ëª¨ë“œ**:
  - ëª¨ë“  Google ì‚¬ìš©ì ë¡œê·¸ì¸ ê°€ëŠ¥
  - Google ê²€í†  í•„ìš”í•  ìˆ˜ ìˆìŒ (ë¯¼ê°í•œ ê¶Œí•œ ìš”ì²­ ì‹œ)

### 2. Bundle ID ì¼ì¹˜
- Xcode í”„ë¡œì íŠ¸ ì„¤ì •
- Firebase Console
- Google Cloud Console OAuth í´ë¼ì´ì–¸íŠ¸
- Info.plist

**ëª¨ë“  ê³³ì—ì„œ `app.insign`ìœ¼ë¡œ ë™ì¼í•´ì•¼ í•¨!**

### 3. GoogleService-Info.plist
- Firebase Consoleì—ì„œ ë‹¤ìš´ë¡œë“œí•œ ìµœì‹  íŒŒì¼ ì‚¬ìš©
- `ios/Runner/` ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜
- Xcode í”„ë¡œì íŠ¸ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

## ğŸ”— ì°¸ê³  ë§í¬

- **Google Cloud Console**: https://console.cloud.google.com/
- **Firebase Console**: https://console.firebase.google.com/
- **OAuth 2.0 ì„¤ì • ê°€ì´ë“œ**: https://developers.google.com/identity/protocols/oauth2
- **Firebase iOS ì„¤ì •**: https://firebase.google.com/docs/ios/setup

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### "400 ì˜¤ë¥˜: invalid_request" ì§€ì† ì‹œ

1. **OAuth ë™ì˜ í™”ë©´ ê²Œì‹œ ìƒíƒœ í™•ì¸**
   - í…ŒìŠ¤íŠ¸ ëª¨ë“œì¸ ê²½ìš° í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìì— ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í™•ì¸

2. **í´ë¼ì´ì–¸íŠ¸ ID ì¬ìƒì„±**
   - Google Cloud Consoleì—ì„œ ê¸°ì¡´ iOS í´ë¼ì´ì–¸íŠ¸ ID ì‚­ì œ
   - ìƒˆë¡œ ìƒì„±
   - ì½”ë“œ ì—…ë°ì´íŠ¸

3. **ìºì‹œ í´ë¦¬ì–´**
   ```bash
   flutter clean
   cd ios
   rm -rf Pods Podfile.lock
   pod install
   cd ..
   ```

### "access_denied" ì˜¤ë¥˜

- OAuth ë™ì˜ í™”ë©´ì´ "í…ŒìŠ¤íŠ¸" ëª¨ë“œì¸ ê²½ìš°
- í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ëª©ë¡ì— ì¶”ê°€ í•„ìš”

### ë¡œê·¸ì¸ í›„ ë°”ë¡œ ë¡œê·¸ì•„ì›ƒë¨

- `serverClientId` ì„¤ì • í™•ì¸
- Backend APIì—ì„œ ID Token ê²€ì¦ ë¡œì§ í™•ì¸

## ğŸ“ ì‘ì—… ê¸°ë¡

- **ë‚ ì§œ**: 2025-12-02
- **ì‘ì—…**: iOS Google OAuth ì„¤ì • ì¶”ê°€
- **ë³€ê²½ íŒŒì¼**:
  - `lib/data/services/google_auth_service.dart`
  - `iOS_Google_OAuth_ì„¤ì •ê°€ì´ë“œ.md` (ì‹ ê·œ)
