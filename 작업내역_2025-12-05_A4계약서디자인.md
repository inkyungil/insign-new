# ì‘ì—… ë‚´ì—­ - A4 ìŠ¤íƒ€ì¼ ê³„ì•½ì„œ ë””ìì¸ ì ìš©

**ì‘ì—…ì¼**: 2025ë…„ 12ì›” 5ì¼
**ì‘ì—…ì**: Claude Code
**í”„ë¡œì íŠ¸**: ì¸ì‹¸ì¸ (Insign) Flutter ì•±

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ê³„ì•½ì„œ ê´€ë ¨ í™”ë©´ì„ A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ë¡œ ê°œì„ í•˜ì—¬ ì „ë¬¸ì ì´ê³  ì„¸ë ¨ëœ UI/UX ì œê³µ

### ì°¸ê³  ìƒ˜í”Œ
- `/home/insign/insign_form_test/contract-on-tap/` (React ìƒ˜í”Œ)
- `/home/insign/insign_form_test/lib/` (Flutter ìƒ˜í”Œ)

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. Step 1 (ê³„ì•½ í•­ëª©) - formSchema ê¸°ë°˜ A4 ì…ë ¥ í¼

**íŒŒì¼**: `/home/insign/insign_flutter/lib/features/contracts/view/create_contract_screen.dart`

**ë³€ê²½ ì‚¬í•­**:
- âœ… A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ Container ë˜í¼ ì¶”ê°€ (line 3433)
- âœ… CONTRACT í—¤ë” ì¶”ê°€ (line 3455)
- âœ… í•˜ì´ë¼ì´íŠ¸ ì¸ë¼ì¸ ì…ë ¥ ìœ„ì ¯ ìƒì„± (line 3527)
  - ë…¸ë€ìƒ‰ ë°°ê²½ (`#FFF59D`)
  - 3ê°€ì§€ ìƒíƒœ: í™œì„±(`#FBC02D`), ì…ë ¥ì™„ë£Œ(ë°˜íˆ¬ëª…), ë¯¸ì…ë ¥
- âœ… í…Œì´ë¸” ë ˆì´ì•„ì›ƒìœ¼ë¡œ í•„ë“œ ë°°ì¹˜ (line 3589)
  - í•„ë“œë¥¼ 2ê°œì”© ê°€ë¡œë¡œ ë°°ì¹˜
  - ë™ì  í•„ë“œ ë§¤í•‘ (í…œí”Œë¦¿ë§ˆë‹¤ ë‹¤ë¥¸ í•„ë“œ)
- âœ… _buildTemplateSectionCard ë¦¬íŒ©í† ë§ (line 1817)
- âœ… í¬ì»¤ìŠ¤ ìƒíƒœ ê´€ë¦¬ (_activeFieldId ì¶”ê°€, line 70)

**í•µì‹¬ ë©”ì„œë“œ**:
```dart
// Line 3433
Widget _buildA4DocumentWrapper(Widget child)

// Line 3455
Widget _buildContractDocumentHeader()

// Line 3527
Widget _buildHighlightInlineInput({
  required TemplateFieldDefinition field,
  required TextEditingController controller,
  double? width,
})

// Line 3589
Widget _buildA4FieldsTable(List<TemplateFieldDefinition> fields)

// Line 3642
Widget _buildTemplateFieldInputForA4(TemplateFieldDefinition field)
```

---

### 2. Step 3 (ê³„ì•½ì„œ ë¯¸ë¦¬ë³´ê¸°) - HTML A4 ìŠ¤íƒ€ì¼

**íŒŒì¼**: `/home/insign/insign_flutter/lib/features/contracts/view/create_contract_screen.dart`

**ë³€ê²½ ì‚¬í•­**:
- âœ… _buildContractHtmlPreview() ìˆ˜ì • (line 2669)
- âœ… A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ ì ìš©
  - ìµœëŒ€ ë„ˆë¹„: 420px
  - ê·¸ë¦¼ì íš¨ê³¼
  - CONTRACT í—¤ë”
- âœ… HTML ë Œë”ë§ ìœ ì§€ (HtmlWidget)

**Before**:
```dart
// ì¼ë°˜ ì¹´ë“œ ìŠ¤íƒ€ì¼
Container(
  decoration: BoxDecoration(
    borderRadius: BorderRadius.circular(22),
  ),
  child: HtmlWidget(html),
)
```

**After**:
```dart
// A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼
Container(
  constraints: BoxConstraints(maxWidth: 420),
  decoration: BoxDecoration(
    boxShadow: [...],
  ),
  child: Column([
    _buildContractDocumentHeader(),
    HtmlWidget(html),
  ]),
)
```

---

### 3. ê³„ì•½ ìƒì„¸ í˜ì´ì§€ - HTML A4 ìŠ¤íƒ€ì¼

**íŒŒì¼**: `/home/insign/insign_flutter/lib/features/contracts/view/contract_detail_screen.dart`

**ë³€ê²½ ì‚¬í•­**:
- âœ… _buildHtmlPreviewWidgets() ìˆ˜ì • (line 918)
- âœ… A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ ì ìš©
- âœ… CONTRACT í—¤ë” ì¶”ê°€
- âœ… ê¹”ë”í•œ ë ˆì´ì•„ì›ƒ

**í•µì‹¬ ë³€ê²½**:
```dart
// Line 918
List<Widget> _buildHtmlPreviewWidgets() {
  return [
    // ì œëª©
    Text('ê³„ì•½ì„œ'),
    // A4 Container
    Container(
      constraints: BoxConstraints(maxWidth: 420),
      child: Column([
        // CONTRACT í—¤ë”
        Row([
          Text('CONTRACT'),
          Text('INSIGN'),
        ]),
        Divider(),
        // HTML ë‚´ìš©
        HtmlWidget(html),
      ]),
    ),
  ];
}
```

---

## ğŸ¨ ë””ìì¸ íŠ¹ì§•

### A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼
```dart
Container(
  margin: EdgeInsets.symmetric(horizontal: 16),
  constraints: BoxConstraints(maxWidth: 420),
  decoration: BoxDecoration(
    color: Colors.white,
    boxShadow: [
      BoxShadow(
        color: Colors.black.withOpacity(0.1),
        blurRadius: 20,
        offset: Offset(0, 8),
      ),
    ],
  ),
  padding: EdgeInsets.all(24),
)
```

### CONTRACT í—¤ë”
```dart
Row(
  mainAxisAlignment: MainAxisAlignment.spaceBetween,
  children: [
    // ì™¼ìª½: CONTRACT
    Text(
      'CONTRACT',
      style: TextStyle(
        fontSize: 24,
        fontWeight: FontWeight.w700,
        letterSpacing: 2,
      ),
    ),
    // ì˜¤ë¥¸ìª½: INSIGN ë¡œê³ 
    Container(
      padding: EdgeInsets.symmetric(horizontal: 12, vertical: 8),
      decoration: BoxDecoration(
        border: Border.all(width: 2),
      ),
      child: Text('INSIGN'),
    ),
  ],
)
```

### í•˜ì´ë¼ì´íŠ¸ ì¸ë¼ì¸ ì…ë ¥
```dart
TextField(
  decoration: InputDecoration(
    filled: true,
    fillColor: isActive
        ? Color(0xFFFBC02D)           // í™œì„±í™”: ì§„í•œ ë…¸ë€ìƒ‰
        : isFilled
            ? Color(0xFFF59D).withOpacity(0.7)  // ì…ë ¥ì™„ë£Œ: ë°˜íˆ¬ëª…
            : Color(0xFFFFF59D),      // ë¯¸ì…ë ¥: ê¸°ë³¸ ë…¸ë€ìƒ‰
    border: OutlineInputBorder(
      borderRadius: BorderRadius.circular(6),
      borderSide: BorderSide.none,
    ),
    focusedBorder: OutlineInputBorder(
      borderSide: BorderSide(
        color: Color(0xFFFBC02D),
        width: 2,
      ),
    ),
  ),
)
```

### í…Œì´ë¸” ë ˆì´ì•„ì›ƒ
```dart
Table(
  border: TableBorder.all(
    color: Color(0xFFD4D9E2),
    width: 0.5,
  ),
  columnWidths: {
    0: FixedColumnWidth(70),   // ë ˆì´ë¸” ì—´
    1: FlexColumnWidth(),       // ì…ë ¥ ì—´
    2: FixedColumnWidth(70),    // ë ˆì´ë¸” ì—´
    3: FlexColumnWidth(),       // ì…ë ¥ ì—´
  },
  children: [
    TableRow([
      _buildTableCell('ì„±ëª…', isHeader: true),
      _buildHighlightInput(...),
      _buildTableCell('ìƒë…„ì›”ì¼', isHeader: true),
      _buildHighlightInput(...),
    ]),
  ],
)
```

---

## ğŸ”§ ê¸°ìˆ ì  êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### 1. formSchema ë™ì  ë§¤í•‘
- í…œí”Œë¦¿ë§ˆë‹¤ ë‹¤ë¥¸ í•„ë“œ êµ¬ì¡°ë¥¼ ì§€ì›
- `_authorSections`ì—ì„œ ì„¹ì…˜ë³„ë¡œ í•„ë“œ ì¶”ì¶œ
- ê° í•„ë“œëŠ” `TemplateFieldDefinition`ìœ¼ë¡œ ì •ì˜ë¨

### 2. ìƒíƒœ ê´€ë¦¬
- `_activeFieldId`: í˜„ì¬ í¬ì»¤ìŠ¤ëœ í•„ë“œ ID ì¶”ì 
- `_templateFieldValues`: í•„ë“œ ê°’ ì €ì¥ (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
- `_templateFieldControllers`: TextEditingController ë§¤í•‘

### 3. í•„ë“œ íƒ€ì… ì²˜ë¦¬
```dart
Widget _buildTemplateFieldInputForA4(TemplateFieldDefinition field) {
  final type = field.type.toLowerCase();

  // í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ â†’ í•˜ì´ë¼ì´íŠ¸ ì¸ë¼ì¸
  if (_isTextInputField(type)) {
    return _buildHighlightInlineInput(...);
  }

  // ê¸°íƒ€ í•„ë“œ (select, checkbox, date ë“±) â†’ ê¸°ì¡´ ë¡œì§ ì‚¬ìš©
  return _buildTemplateFieldInput(field);
}
```

### 4. HTML ë Œë”ë§
- `HtmlWidget` ì‚¬ìš© (flutter_widget_from_html_core)
- í”Œë ˆì´ìŠ¤í™€ë” ì¹˜í™˜: `{{fieldId}}` â†’ ì‹¤ì œ ê°’
- `_generateFilledTemplateHtml()`: í…œí”Œë¦¿ HTML + ì…ë ¥ ê°’ ë³‘í•©

---

## ğŸ“‚ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

1. **create_contract_screen.dart** (ì´ 3,720ë¼ì¸)
   - Step 1 (ê³„ì•½ í•­ëª©): A4 ì…ë ¥ í¼
   - Step 3 (ìš”ì•½): A4 HTML ë¯¸ë¦¬ë³´ê¸°
   - ìƒˆë¡œìš´ ë©”ì„œë“œ 6ê°œ ì¶”ê°€

2. **contract_detail_screen.dart** (ì´ 1,021ë¼ì¸)
   - ê³„ì•½ ìƒì„¸: A4 HTML í‘œì‹œ
   - `_buildHtmlPreviewWidgets()` ë¦¬íŒ©í† ë§

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### Flutter ì•± (ëª¨ë°”ì¼)
```bash
cd /home/insign/insign_flutter
flutter run
```

### Flutter ì›¹
```bash
cd /home/insign/insign_flutter
flutter build web --release
cp -r build/web/* /home/insign/web/
```

### í™•ì¸í•  í™”ë©´
1. **ê³„ì•½ì„œ ì‘ì„±**
   - í…œí”Œë¦¿ ì„ íƒ (`/templates`)
   - Step 1: formSchema A4 ì…ë ¥ í¼ í™•ì¸
   - Step 3: HTML A4 ë¯¸ë¦¬ë³´ê¸° í™•ì¸

2. **ê³„ì•½ ìƒì„¸**
   - ê³„ì•½ ëª©ë¡ (`/contracts`)
   - ê³„ì•½ì„œ í´ë¦­
   - A4 ìŠ¤íƒ€ì¼ ê³„ì•½ì„œ í™•ì¸

---

## ğŸ“Š Before & After

### Before (ê¸°ì¡´ ë””ìì¸)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê³„ì•½ì ì •ë³´            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì„±ëª…                   â”‚
â”‚  [__________________]  â”‚
â”‚                         â”‚
â”‚  ìƒë…„ì›”ì¼               â”‚
â”‚  [__________________]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After (A4 ìŠ¤íƒ€ì¼)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTRACT            [INSIGN]     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                   â”‚
â”‚  ê³„ì•½ì ì •ë³´                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ì„±ëª… â”‚[í™ê¸¸ë™]â–“â”‚ìƒë…„ì›”â”‚[...]â–“â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ì—°ë½ì²˜â”‚[010...]â–“â”‚ì´ë©”ì¼â”‚[...]â–“â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ í•µì‹¬ ê°œì„  ì‚¬í•­

1. **ì „ë¬¸ì„±**: A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ë¡œ ê³„ì•½ì„œì˜ ê³µì‹ì ì¸ ëŠë‚Œ ê°•í™”
2. **ê°€ë…ì„±**: í…Œì´ë¸” ë ˆì´ì•„ì›ƒìœ¼ë¡œ ì •ë³´ êµ¬ì¡° ëª…í™•í™”
3. **UX**: ë…¸ë€ìƒ‰ í•˜ì´ë¼ì´íŠ¸ë¡œ ì…ë ¥ ìƒíƒœ ì§ê´€ì  í‘œì‹œ
4. **ì¼ê´€ì„±**: ëª¨ë“  ê³„ì•½ì„œ í™”ë©´ì— ë™ì¼í•œ ë””ìì¸ ì ìš©
5. **í™•ì¥ì„±**: formSchema ê¸°ë°˜ ë™ì  í¼ìœ¼ë¡œ ëª¨ë“  í…œí”Œë¦¿ ì§€ì›

---

## ğŸ’¡ ì£¼ìš” ì„¤ê³„ ì›ì¹™

### 1. ê¸°ì¡´ ë¡œì§ ë³´ì¡´
- âœ… `_templateFieldValues` ë°ì´í„° êµ¬ì¡° ìœ ì§€
- âœ… formSchema ê¸°ë°˜ ë™ì  í•„ë“œ ìƒì„± ìœ ì§€
- âœ… HTML ë Œë”ë§ ë¡œì§ ìœ ì§€
- âœ… ë°±ì—”ë“œ API ì—°ë™ ê·¸ëŒ€ë¡œ

### 2. UIë§Œ ë³€ê²½
- âœ… A4 ë¬¸ì„œ ìŠ¤íƒ€ì¼ Container
- âœ… í…Œì´ë¸” ë ˆì´ì•„ì›ƒ
- âœ… í•˜ì´ë¼ì´íŠ¸ ì¸ë¼ì¸ ì…ë ¥
- âŒ ë°ì´í„° ì €ì¥/ì „ì†¡ ë¡œì§ ë³€ê²½ ì—†ìŒ

### 3. í…œí”Œë¦¿ ë…ë¦½ì„±
- ê·¼ë¡œê³„ì•½ì„œ, í”„ë¦¬ëœì„œ ê³„ì•½ì„œ, ì„ëŒ€ì°¨ ê³„ì•½ì„œ ë“±
- ëª¨ë‘ ë™ì¼í•œ A4 ìŠ¤íƒ€ì¼ ì ìš©
- í•„ë“œë§Œ í…œí”Œë¦¿ë§ˆë‹¤ ë‹¤ë¦„

---

## ğŸ” ì½”ë“œ ë¶„ì„ ê²°ê³¼

```
âœ… No errors found!
âš ï¸  25-26 warnings (ê¸°ì¡´ ê²½ê³ , ê¸°ëŠ¥ì— ì˜í–¥ ì—†ìŒ)
   - deprecated ë©”ì„œë“œ ì‚¬ìš© (withOpacity)
   - unused ë³€ìˆ˜ ê²½ê³ 
```

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

### formSchema êµ¬ì¡° ì˜ˆì‹œ
```json
{
  "version": 1,
  "title": "í‘œì¤€ ê·¼ë¡œê³„ì•½ì„œ ì…ë ¥ í•­ëª©",
  "sections": [
    {
      "id": "employer-info",
      "title": "ì‚¬ìš©ì(íšŒì‚¬) ì •ë³´",
      "role": "author",
      "fields": [
        {
          "id": "employerName",
          "label": "ì‚¬ì—…ì²´ëª…",
          "type": "text",
          "required": true,
          "placeholder": "ì˜ˆ: ì¸ì‹¸ì¸ ì£¼ì‹íšŒì‚¬"
        }
      ]
    }
  ]
}
```

### HTML í…œí”Œë¦¿ ì˜ˆì‹œ
```html
<h1>í‘œì¤€ê·¼ë¡œê³„ì•½ì„œ</h1>
<p>{{employerName}} (ì´í•˜ "ê°‘"ì´ë¼ í•¨)ê³¼(ì™€) {{employeeName}} (ì´í•˜ "ì„"ì´ë¼ í•¨)ì€ ë‹¤ìŒê³¼ ê°™ì´ ê·¼ë¡œê³„ì•½ì„ ì²´ê²°í•œë‹¤.</p>
<div><strong>1. ê·¼ë¡œê³„ì•½ê¸°ê°„:</strong> {{employmentStartDate}} ë¶€í„° {{employmentEndDate}} ê¹Œì§€</div>
```

---

## ğŸš€ í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­

1. **ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€**
   - í•„ë“œ í¬ì»¤ìŠ¤ ì‹œ ë¶€ë“œëŸ¬ìš´ ì „í™˜
   - í˜ì´ì§€ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜

2. **ìë™ í¬ì»¤ìŠ¤ ì´ë™**
   - Enter í‚¤ë¡œ ë‹¤ìŒ í•„ë“œ ì´ë™
   - "ë‹¤ìŒ" ë²„íŠ¼ í´ë¦­ ì‹œ ë¹ˆ í•„ë“œë¡œ ìë™ ì´ë™

3. **ë¯¸ë¦¬ë³´ê¸° ê°œì„ **
   - ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
   - ì¸ì‡„ ë ˆì´ì•„ì›ƒ ìµœì í™”

4. **ì ‘ê·¼ì„± ê°œì„ **
   - ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
   - í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê°•í™”

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

ì‘ì—…ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ì¶”ê°€ ê°œì„ ì´ í•„ìš”í•œ ê²½ìš° ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

**ì‘ì—… ì™„ë£Œì¼**: 2025ë…„ 12ì›” 5ì¼
