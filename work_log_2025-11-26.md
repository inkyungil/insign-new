# ì‘ì—…ë‚´ì—­ 2025-11-26

## ğŸ“‹ ì‘ì—… ìš”ì•½

**ëª©í‘œ**: ëª¨ë‘ì‹¸ì¸ í”Œë«í¼ ì°¸ê³ í•˜ì—¬ ì¸ì‹¸ì¸ Flutter ì•± UX/ë³´ì•ˆ ê°œì„ 
**ì‘ì—…ì**: Claude Code
**ë‚ ì§œ**: 2025ë…„ 11ì›” 26ì¼

---

## ğŸ¯ ì™„ë£Œëœ ì‘ì—…

### 1. ë ˆê±°ì‹œ ì½”ë“œ ì •ë¦¬ (ì£¼ì‹ ì•± â†’ ê³„ì•½ ê´€ë¦¬ ì•±)

#### ì‚­ì œëœ íŒŒì¼ (17ê°œ)
**Features**:
- `lib/features/invest/` - ì£¼ì‹ íˆ¬ì í™”ë©´ ì „ì²´ (2ê°œ íŒŒì¼)
- `lib/features/podcast/` - íŒŸìºìŠ¤íŠ¸ í™”ë©´ ì „ì²´ (6ê°œ íŒŒì¼)
- `lib/features/portfolio/` - í¬íŠ¸í´ë¦¬ì˜¤ í™”ë©´ ì „ì²´ (1ê°œ íŒŒì¼)

**Models**:
- `lib/models/stock.dart`
- `lib/models/podcast.dart`
- `lib/models/portfolio.dart`

**Repositories**:
- `lib/data/stock_repository.dart`
- `lib/data/podcast_repository.dart`
- `lib/data/portfolio_repository.dart`

#### ìˆ˜ì •ëœ íŒŒì¼ (5ê°œ)
- `lib/main.dart` - ë ˆê±°ì‹œ Cubit/Repository ë“±ë¡ ì œê±°, ë¯¸ì‚¬ìš© import ì •ë¦¬
- `lib/app.dart` - MiniPlayer widget ì œê±°
- `lib/core/router/app_router.dart` - `/now_playing` ë¼ìš°íŠ¸ ì œê±°
- `pubspec.yaml` - ì˜¤ë””ì˜¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê±° (`just_audio`, `audio_session`, `rxdart`)
- `pubspec.lock` - ì˜ì¡´ì„± ì—…ë°ì´íŠ¸

#### ì •ë¦¬ ê²°ê³¼
- ì‚­ì œëœ ì½”ë“œ: ~2,000 ì¤„ ì´ìƒ
- ì œê±°ëœ ì˜ì¡´ì„±: 3ê°œ
- ì½”ë“œë² ì´ìŠ¤ ì •ë¦¬: âœ… ì™„ë£Œ

---

### 2. ì „ìì„œëª… ë™ì˜ í™”ë©´ ì¶”ê°€ â­â­â­

**ì°¸ê³ **: ëª¨ë‘ì‹¸ì¸ ì´ë¯¸ì§€ 3

**íŒŒì¼**: `lib/features/contracts/view/contract_sign_screen.dart`

#### ì¶”ê°€ëœ ê¸°ëŠ¥
1. **State ë³€ìˆ˜** (80ì¤„)
   ```dart
   bool _agreedToEsignTerms = false;
   ```

2. **ë™ì˜ ë‹¤ì´ì–¼ë¡œê·¸ í•¨ìˆ˜** (414-505ì¤„)
   ```dart
   Future<bool> _showEsignAgreementDialog() async {
     // 4ê°œ ë™ì˜ í•­ëª© ì²´í¬ë°•ìŠ¤
     // - ì „ìì„œëª… ë° ì „ìë¬¸ì„œì˜ ë²•ì  íš¨ë ¥ ë™ì˜
     // - ì „ìë¬¸ì„œë¥¼ ì›ë³¸ìœ¼ë¡œ ì¸ì •
     // - ì„œëª…ìì˜ ì •ë‹¹í•œ ê¶Œí•œ í™•ì¸
     // - ì „ìì„œëª… ì´ìš©ì•½ê´€ ë™ì˜
   }
   ```

3. **ì„œëª… ì œì¶œ ì‹œ ë™ì˜ í™•ì¸** (570-584ì¤„)
   ```dart
   Future<void> _handleSubmitSignature() async {
     // ...
     if (!_agreedToEsignTerms) {
       final agreed = await _showEsignAgreementDialog();
       if (!agreed) return;
       setState(() => _agreedToEsignTerms = true);
     }
     // ...
   }
   ```

#### ë™ì‘ ë°©ì‹
- ì„œëª… ì œì¶œ ë²„íŠ¼ í´ë¦­ ì‹œ ìë™ìœ¼ë¡œ ë™ì˜ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- 4ê°œ í•­ëª© ëª¨ë‘ ì²´í¬í•´ì•¼ "ë™ì˜í•˜ê³  ì„œëª… ì™„ë£Œ" ë²„íŠ¼ í™œì„±í™”
- í•œ ë²ˆ ë™ì˜í•˜ë©´ ì¬í‘œì‹œ ì•ˆ í•¨
- ì·¨ì†Œ ì‹œ ì„œëª… ì œì¶œ ì¤‘ë‹¨

#### ì½”ë“œ ë¼ì¸ ìˆ˜
- ì¶”ê°€: +80ì¤„

---

### 3. í”¼ì‹± ë°©ì§€ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€ âš ï¸

**ì°¸ê³ **: ëª¨ë‘ì‹¸ì¸ ì´ë¯¸ì§€ 1, 2

**íŒŒì¼**: `lib/features/contracts/view/contract_sign_screen.dart`

#### ì¶”ê°€ëœ UI (1483-1505ì¤„)
```dart
Container(
  padding: const EdgeInsets.all(12),
  decoration: BoxDecoration(
    color: const Color(0xFFFEF3C7),  // ë…¸ë€ìƒ‰ ë°°ê²½
    borderRadius: BorderRadius.circular(8),
    border: Border.all(color: const Color(0xFFFCD34D), width: 1),
  ),
  child: Row(
    children: const [
      Icon(Icons.warning_amber_rounded, color: Color(0xFFF59E0B)),
      SizedBox(width: 8),
      Expanded(
        child: Text(
          'âš ï¸ í”¼ì‹± ì‚¬ê¸° ì£¼ì˜\n'
          'ì‚¬ê¸°, ì‚¬ì¹­ ì‚¬ë¡€ì— ì£¼ì˜í•´ ì£¼ì„¸ìš”. ë¶ˆë²•/ì‚¬ê¸°ê°€ ì˜ì‹¬ë˜ëŠ” ë¬¸ì„œëŠ” '
          'ì„œëª…í•˜ì§€ ë§ˆì‹œê³ , ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ê²½ìš° ìš”ì²­ìì—ê²Œ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”.',
          style: TextStyle(fontSize: 12, color: Color(0xFF92400E)),
        ),
      ),
    ],
  ),
)
```

#### ìœ„ì¹˜
- ë³¸ì¸ í™•ì¸ í¼ (`_buildVerificationForm()`)
- "ê³„ì•½ í™•ì¸í•˜ê¸°" ë²„íŠ¼ í•˜ë‹¨
- ê¸°ì¡´ ì•ˆë‚´ ë¬¸êµ¬ ìƒë‹¨

#### ì½”ë“œ ë¼ì¸ ìˆ˜
- ì¶”ê°€: +24ì¤„

---

### 4. ì„ì‹œ ì €ì¥ ê¸°ëŠ¥ ì¶”ê°€ ğŸ’¾

**ì°¸ê³ **: ëª¨ë‘ì‹¸ì¸ ì´ë¯¸ì§€ 5

**íŒŒì¼**: `lib/features/contracts/view/create_contract_screen.dart`

#### ì¶”ê°€ëœ ê¸°ëŠ¥

##### 1) Import ì¶”ê°€ (21ì¤„)
```dart
import 'package:shared_preferences/shared_preferences.dart';
```

##### 2) ì„ì‹œ ì €ì¥ í•¨ìˆ˜ (239-283ì¤„)
```dart
Future<void> _saveDraft() async {
  final prefs = await SharedPreferences.getInstance();
  final draftKey = 'contract_draft_${widget.templateId ?? "default"}';

  final draftData = {
    'contractName': _contractNameController.text,
    'clientName': _clientNameController.text,
    'clientContact': _clientContactController.text,
    'clientEmail': _clientEmailController.text,
    'performerName': _performerNameController.text,
    'performerContact': _performerContactController.text,
    'performerEmail': _performerEmailController.text,
    'amount': _amountController.text,
    'details': _detailsController.text,
    'includeAmount': _includeAmount,
    'startDate': _startDate?.toIso8601String(),
    'endDate': _endDate?.toIso8601String(),
    'currentStep': _currentStep,
    'timestamp': DateTime.now().toIso8601String(),
  };

  await prefs.setString(draftKey, jsonEncode(draftData));
  Fluttertoast.showToast(msg: 'ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
}
```

##### 3) ì„ì‹œ ì €ì¥ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜ (285-328ì¤„)
```dart
Future<void> _loadDraft() async {
  final prefs = await SharedPreferences.getInstance();
  final draftKey = 'contract_draft_${widget.templateId ?? "default"}';
  final draftJson = prefs.getString(draftKey);

  if (draftJson == null || draftJson.isEmpty) return;

  final draftData = jsonDecode(draftJson) as Map<String, dynamic>;
  // ëª¨ë“  í•„ë“œ ë³µì›
  setState(() { ... });
  Fluttertoast.showToast(msg: 'ì„ì‹œ ì €ì¥ëœ ë‚´ìš©ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤');
}
```

##### 4) ì„ì‹œ ì €ì¥ ì‚­ì œ í•¨ìˆ˜ (330-338ì¤„)
```dart
Future<void> _clearDraft() async {
  final prefs = await SharedPreferences.getInstance();
  final draftKey = 'contract_draft_${widget.templateId ?? "default"}';
  await prefs.remove(draftKey);
}
```

##### 5) initStateì—ì„œ ìë™ ë¶ˆëŸ¬ì˜¤ê¸° (121-123ì¤„)
```dart
// ì„ì‹œ ì €ì¥ ë¶ˆëŸ¬ì˜¤ê¸° (í…œí”Œë¦¿ ë¡œë”© í›„)
Future.delayed(const Duration(milliseconds: 500), () {
  _loadDraft();
});
```

##### 6) AppBarì— ì„ì‹œ ì €ì¥ ë²„íŠ¼ ì¶”ê°€ (2847-2854ì¤„)
```dart
actions: [
  TextButton.icon(
    onPressed: _saveDraft,
    icon: const Icon(Icons.save_outlined, size: 18),
    label: const Text('ì„ì‹œ ì €ì¥', style: TextStyle(fontSize: 14)),
  ),
  // ... ê¸°ì¡´ ë²„íŠ¼ë“¤
],
```

##### 7) ê³„ì•½ ìƒì„± ì„±ê³µ ì‹œ ì„ì‹œ ì €ì¥ ì‚­ì œ (2814-2815ì¤„)
```dart
if (!mounted) return;

// ì„ì‹œ ì €ì¥ ì‚­ì œ
await _clearDraft();

_showToast('ê³„ì•½ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
context.pop(true);
```

#### ë™ì‘ ë°©ì‹
1. **ì €ì¥**: AppBar "ì„ì‹œ ì €ì¥" ë²„íŠ¼ í´ë¦­ â†’ SharedPreferencesì— ì €ì¥
2. **ìë™ ë¶ˆëŸ¬ì˜¤ê¸°**: ì•± ì‹œì‘ ì‹œ 500ms í›„ ìë™ìœ¼ë¡œ ì„ì‹œ ì €ì¥ ë°ì´í„° ë³µì›
3. **ìë™ ì‚­ì œ**: ê³„ì•½ì„œ ìƒì„± ì„±ê³µ ì‹œ ì„ì‹œ ì €ì¥ ë°ì´í„° ì‚­ì œ
4. **Toast ì•Œë¦¼**: ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ì‹œ ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±

#### ì €ì¥ë˜ëŠ” ë°ì´í„°
- ê³„ì•½ì„œ ì´ë¦„, ì˜ë¢°ì¸/ìˆ˜í–‰ì ì •ë³´ (ì´ë¦„, ì—°ë½ì²˜, ì´ë©”ì¼)
- ê¸ˆì•¡, ìƒì„¸ë‚´ìš©, ì‹œì‘/ì¢…ë£Œ ë‚ ì§œ
- í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ë‹¨ê³„ (currentStep)
- ì €ì¥ ì‹œê° (timestamp)

#### ì½”ë“œ ë¼ì¸ ìˆ˜
- ì¶”ê°€: +115ì¤„

---

## ğŸ“Š ì „ì²´ ë³€ê²½ ì‚¬í•­ ìš”ì•½

| ì‘ì—… | íŒŒì¼ | ì¶”ê°€ | ì‚­ì œ | ë³€ê²½ |
|------|------|------|------|------|
| ë ˆê±°ì‹œ ì½”ë“œ ì •ë¦¬ | 5ê°œ íŒŒì¼ | - | ~2,000ì¤„ | 17ê°œ íŒŒì¼ ì‚­ì œ |
| ì „ìì„œëª… ë™ì˜ í™”ë©´ | `contract_sign_screen.dart` | +80ì¤„ | - | - |
| í”¼ì‹± ë°©ì§€ ì•ˆë‚´ | `contract_sign_screen.dart` | +24ì¤„ | - | - |
| ì„ì‹œ ì €ì¥ ê¸°ëŠ¥ | `create_contract_screen.dart` | +115ì¤„ | - | - |
| **í•©ê³„** | **7ê°œ íŒŒì¼** | **+219ì¤„** | **~2,000ì¤„** | **17ê°œ ì‚­ì œ** |

---

## ğŸ¯ ì£¼ìš” ê°œì„  íš¨ê³¼

### 1. ë³´ì•ˆ ê°•í™”
- âœ… ì „ìì„œëª… ë²•ì  íš¨ë ¥ ë™ì˜ (ë²•ì  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±)
- âœ… í”¼ì‹± ì‚¬ê¸° ë°©ì§€ ì•ˆë‚´ (ì‚¬ìš©ì ë³´í˜¸)

### 2. ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- âœ… ì„ì‹œ ì €ì¥ìœ¼ë¡œ ì‘ì„± ì¤‘ ë°ì´í„° ì†ì‹¤ ë°©ì§€
- âœ… ì•± ì¬ì‹œì‘ ì‹œ ìë™ ë³µì›ìœ¼ë¡œ í¸ì˜ì„± í–¥ìƒ
- âœ… Toast ë©”ì‹œì§€ë¡œ ì¦‰ê°ì ì¸ í”¼ë“œë°±

### 3. ì½”ë“œ í’ˆì§ˆ ê°œì„ 
- âœ… ë ˆê±°ì‹œ ì½”ë“œ ì œê±°ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- âœ… ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°ë¡œ ë¹Œë“œ í¬ê¸° ê°ì†Œ
- âœ… ëª…í™•í•œ ì•± ëª©ì  (ê³„ì•½ ê´€ë¦¬)

---

## ğŸ” ëª¨ë‘ì‹¸ì¸ vs ì¸ì‹¸ì¸ ë¹„êµ (ê°œì„  í›„)

| ê¸°ëŠ¥ | ëª¨ë‘ì‹¸ì¸ | ì¸ì‹¸ì¸ (ê°œì„  ì „) | ì¸ì‹¸ì¸ (ê°œì„  í›„) |
|------|---------|----------------|----------------|
| ì „ìì„œëª… ë™ì˜ í™”ë©´ | âœ… | âŒ | âœ… **ì¶”ê°€ë¨** |
| í”¼ì‹± ë°©ì§€ ì•ˆë‚´ | âœ… | âŒ | âœ… **ì¶”ê°€ë¨** |
| ì„ì‹œ ì €ì¥ | âœ… | âŒ | âœ… **ì¶”ê°€ë¨** |
| íœ´ëŒ€í° ë³¸ì¸ ì¸ì¦ | âœ… | âŒ | âŒ (í–¥í›„ ê³„íš) |
| ì§„í–‰ë¥  í‘œì‹œ (N/M) | âœ… | âŒ | âŒ (í–¥í›„ ê³„íš) |
| í•„ë“œ í•˜ì´ë¼ì´íŠ¸ | âœ… | âŒ | âŒ (í–¥í›„ ê³„íš) |
| ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ | âœ… | âŒ | âŒ (í–¥í›„ ê³„íš) |

---

## ğŸš€ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### ì „ìì„œëª… ë™ì˜ í™”ë©´
1. ê³„ì•½ì„œ ì„œëª… ë§í¬ ì ‘ì†
2. ë³¸ì¸ í™•ì¸ ì™„ë£Œ
3. ì„œëª… ì‘ì„± í›„ "ì„œëª… ì œì¶œ" í´ë¦­
4. **ë™ì˜ ë‹¤ì´ì–¼ë¡œê·¸ ìë™ í‘œì‹œ í™•ì¸** âœ…
5. 4ê°œ í•­ëª© ëª¨ë‘ ì²´í¬ â†’ "ë™ì˜í•˜ê³  ì„œëª… ì™„ë£Œ" ë²„íŠ¼ í™œì„±í™” í™•ì¸ âœ…
6. ë™ì˜ í›„ ì„œëª… ì œì¶œ ì„±ê³µ í™•ì¸ âœ…

### í”¼ì‹± ë°©ì§€ ì•ˆë‚´
1. ê³„ì•½ì„œ ì„œëª… ë§í¬ ì ‘ì†
2. ë³¸ì¸ í™•ì¸ í™”ë©´ì—ì„œ **ë…¸ë€ìƒ‰ ê²½ê³  ë°•ìŠ¤ í‘œì‹œ í™•ì¸** âœ…
3. "âš ï¸ í”¼ì‹± ì‚¬ê¸° ì£¼ì˜" ë©”ì‹œì§€ í™•ì¸ âœ…

### ì„ì‹œ ì €ì¥
1. ìƒˆ ê³„ì•½ì„œ ì‘ì„± ì‹œì‘
2. ê¸°ë³¸ ì •ë³´ ì…ë ¥ (ì´ë¦„, ì´ë©”ì¼, ì—°ë½ì²˜ ë“±)
3. AppBar "ì„ì‹œ ì €ì¥" ë²„íŠ¼ í´ë¦­
4. **"ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤" Toast í™•ì¸** âœ…
5. ì•± ì¢…ë£Œ í›„ ì¬ì‹œì‘
6. ê°™ì€ í…œí”Œë¦¿ìœ¼ë¡œ ê³„ì•½ì„œ ì‘ì„± ì‹œì‘
7. **"ì„ì‹œ ì €ì¥ëœ ë‚´ìš©ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤" Toast í™•ì¸** âœ…
8. ì…ë ¥í–ˆë˜ ì •ë³´ ë³µì› í™•ì¸ âœ…
9. ê³„ì•½ì„œ ìƒì„± ì™„ë£Œ í›„ ì„ì‹œ ì €ì¥ ìë™ ì‚­ì œ í™•ì¸ âœ…

---

## ğŸ“ í–¥í›„ ê°œì„  ê³„íš

### ìš°ì„ ìˆœìœ„ 1 (ë³´ì•ˆ & ë²•ì )
- [ ] íœ´ëŒ€í° ë³¸ì¸ ì¸ì¦ (ì™¸ë¶€ API ì—°ë™ í•„ìš”)
- [ ] ì„œëª… ê¸°í•œ ì„¤ì • ë° ì•Œë¦¼

### ìš°ì„ ìˆœìœ„ 2 (UX ê°œì„ )
- [ ] ì§„í–‰ë¥  í‘œì‹œ "ë‹¤ìŒ í•„ìˆ˜ ì…ë ¥ë€ìœ¼ë¡œ (N/M)"
- [ ] í•„ë“œ í•˜ì´ë¼ì´íŠ¸ (ë…¸ë€ìƒ‰ ê°•ì¡°)
- [ ] ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ ì˜µì…˜ ë©”ë‰´

### ìš°ì„ ìˆœìœ„ 3 (ì•Œë¦¼)
- [ ] ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ì—°ë™ (ë°±ì—”ë“œ ì‘ì—… í•„ìš”)
- [ ] ì´ë©”ì¼ ì•Œë¦¼ í…œí”Œë¦¿ ê°œì„ 

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: Flutter (Dart)
- **State Management**: BLoC/Cubit
- **Local Storage**: SharedPreferences
- **Routing**: GoRouter
- **UI/UX**: Material Design 3

---

## ğŸ“Œ ì°¸ê³  ìë£Œ

- ëª¨ë‘ì‹¸ì¸ í”Œë«í¼ ìŠ¤í¬ë¦°ìƒ· (`/home/insign/sss/`)
- í”„ë¡œì íŠ¸ ê°€ì´ë“œ: `/home/insign/CLAUDE.md`
- Flutter ê³µì‹ ë¬¸ì„œ: https://flutter.dev

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ë ˆê±°ì‹œ ì½”ë“œ ì •ë¦¬ ì™„ë£Œ
- [x] ì „ìì„œëª… ë™ì˜ í™”ë©´ êµ¬í˜„
- [x] í”¼ì‹± ë°©ì§€ ì•ˆë‚´ ì¶”ê°€
- [x] ì„ì‹œ ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„
- [x] ì½”ë“œ ì»´íŒŒì¼ í™•ì¸
- [ ] ì‹¤ì œ ë””ë°”ì´ìŠ¤ í…ŒìŠ¤íŠ¸
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘
- [ ] Git ì»¤ë°‹ ë° í‘¸ì‹œ

---

**ì‘ì—… ì™„ë£Œ**: 2025ë…„ 11ì›” 26ì¼
**ë‹¤ìŒ ì‘ì—…**: ì§„í–‰ë¥  í‘œì‹œ UI ì¶”ê°€ (ì„ íƒ)
